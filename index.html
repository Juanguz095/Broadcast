<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Broadcast</title>

  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <header id="header">

  </header>

  <main id="container">
    <article id="content">

      <h2><span style="color: #00799b;">B</span><span style="color: #00607c;">r</span><span style="color: #d00062;" >o</span><span style="color: #f97e00;">a</span><span style="color: #f9d700;">d</span><span style="color: #00607c;">c</span><span style="color: #00799b;">a</span><span style="color: #d00062;">s</span><span style="color: #f97e00;">t</span></h2>

      <div class="televisor">
        <!-- PANTALLA (VA PRIMERO) -->
        <div class="pantallaCrt">
          <video class="videoCanal" autoplay muted loop></video>
        </div>

          <input type="range" class="slider" data-control="warp">
          <input type="range" class="slider" data-control="noise">
          <input type="range" class="slider" data-control="sync">

        <!-- TELE (VA DESPUÃ‰S) -->
        <img src="old-tv-removebg-preview.png" class="imagenTelevisor">
      </div>

      <script>
        /* =====================
          REFERENCIAS
        ===================== */
        const televisor = document.querySelector(".televisor");
        const video = document.querySelector(".videoCanal");

        /* =====================
          CANALES
        ===================== */
        const canales = [
          { src: "videos/Tonetta - Yummy Yummy Pizza.mp4", volumen: 0.6 },
          { src: "videos/canal2.mp4", volumen: 0.3 },
          { src: "videos/canal3.mp4", volumen: 1 }
        ];

        let canalActual = 0;
        let audioDesbloqueado = false;

        /* =====================
          AUDIO
        ===================== */
        function activarAudio() {
          if (audioDesbloqueado) return;

          video.muted = false;
          video.volume = canales[canalActual].volumen;

          audioDesbloqueado = true;
          console.log("ðŸ”Š Audio desbloqueado");
        }

        /* =====================
          CANALES
        ===================== */
        function cambiarCanal(index) {
          const canal = canales[index];

          video.src = canal.src;
          video.volume = canal.volumen;

          video.load();

          if (audioDesbloqueado) {
            video.play();
          }
        }

        function canalArriba() {
          activarAudio();
          canalActual = (canalActual + 1) % canales.length;
          cambiarCanal(canalActual);
        }

        function canalAbajo() {
          activarAudio();
          canalActual = (canalActual - 1 + canales.length) % canales.length;
          cambiarCanal(canalActual);
        }

        /* =====================
          INTERACCIÃ“N
        ===================== */

        /* tocar la tele desbloquea audio */
        televisor.addEventListener("mousedown", activarAudio);

        /* botones / perillas */
        const btnUp = document.querySelector('[data-control="canalUp"]');
        const btnDown = document.querySelector('[data-control="canalDown"]');

        if (btnUp) btnUp.addEventListener("mousedown", canalArriba);
        if (btnDown) btnDown.addEventListener("mousedown", canalAbajo);

        /* =====================
          INICIO
        ===================== */
        video.muted = true;         // obligatorio por el navegador
        cambiarCanal(canalActual); // carga primer canal
      </script>
    </article>
  </main>
</body>
</html>
